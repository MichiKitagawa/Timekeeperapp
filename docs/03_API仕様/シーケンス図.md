---

---
# ðŸ” ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ä¸€è¦§ - Timekeeperï¼ˆv2ä»•æ§˜ï¼‰

---

## UC01: åˆå›žèµ·å‹•ãƒ»ãƒ©ã‚¤ã‚»ãƒ³ã‚¹è³¼å…¥

```mermaid
sequenceDiagram
    participant U as ãƒ¦ãƒ¼ã‚¶ãƒ¼
    participant FE as ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
    participant Stripe as Stripe
    participant API as ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰

    U->>FE: ã‚¢ãƒ—ãƒªèµ·å‹•
    FE->>FE: ãƒ©ã‚¤ã‚»ãƒ³ã‚¹æœªè³¼å…¥æ¤œå‡º
    FE->>U: ãƒ©ã‚¤ã‚»ãƒ³ã‚¹è³¼å…¥ç”»é¢è¡¨ç¤º
    U->>Stripe: Â¥10,000 æ”¯æ‰•ã„
    Stripe-->>FE: purchase_token è¿”å´
    FE->>API: POST /license/confirm {device_id,purchase_token}
    API-->>FE: {status:ok}
    FE->>U: è¨­å®šç”»é¢ã¸é·ç§»

```

---

## UC06: ãƒ‡ã‚¤ãƒ‘ã‚¹èª²é‡‘

```mermaid
sequenceDiagram
    participant U as ãƒ¦ãƒ¼ã‚¶ãƒ¼
    participant FE as ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
    participant Stripe as Stripe
    participant API as ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰

    U->>FE: ã‚¢ãƒ³ãƒ­ãƒƒã‚¯ãƒœã‚¿ãƒ³æŠ¼ä¸‹
    FE->>Stripe: èª²é‡‘å‡¦ç†ï¼ˆÂ¥200Ã—1.2^unlock_countï¼‰
    Stripe-->>FE: purchase_token è¿”å´
    FE->>API: POST /unlock/daypass {device_id,purchase_token}
    API-->>FE: {status:ok,unlock_count,last_unlock_date}
    FE->>FE: å½“æ—¥åˆ¶é™è§£é™¤
    FE->>U: ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰å¾©å¸°

```