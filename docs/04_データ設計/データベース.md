# ğŸ“¦ Timekeeper ãƒ‡ãƒ¼ã‚¿è¨­è¨ˆï¼ˆv2ä»•æ§˜ï¼‰

---

## ğŸ  ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ãƒ­ãƒ¼ã‚«ãƒ«DBï¼ˆRoom / SharedPreferencesï¼‰

### Table: `apps` (Room)

|ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å|å‹|èª¬æ˜|
|---|---|---|
|`packageName`|string|ä¸»ã‚­ãƒ¼ï¼ˆAndroid ã®ã‚¢ãƒ—ãƒªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åï¼‰|
|`label`|string|ã‚¢ãƒ—ãƒªåè¡¨ç¤ºç”¨|
|`initial_limit_minutes`|integer|ç™»éŒ²æ™‚ã«è¨­å®šã™ã‚‹ä½¿ç”¨æ™‚é–“ï¼ˆç·¨é›†ä¸å¯ï¼‰|
|`target_limit_minutes`|integer|ç›®æ¨™ä½¿ç”¨æ™‚é–“ï¼ˆçŸ­ç¸®ã®ã¿å¯ï¼‰|
|`current_limit_minutes`|integer|å½“æ—¥ã®æ®‹æ™‚é–“ï¼ˆæ¯æ—¥0æ™‚ã« âˆ’1 åˆ†ã€ç›®æ¨™å€¤ã¾ã§ï¼‰|
|`used_minutes_today`|integer|å½“æ—¥ã®ç´¯è¨ˆä½¿ç”¨æ™‚é–“ï¼ˆ1åˆ†å˜ä½ã§åŠ ç®—ï¼‰|

### SharedPreferences

|ã‚­ãƒ¼|å‹|èª¬æ˜|
|---|---|---|
|`device_id`|string|åˆå›èµ·å‹•æ™‚ã« `UUID.randomUUID()` ã§ç”Ÿæˆãƒ»ä¿å­˜|
|`license_purchased`|boolean|åˆå›ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ï¼ˆÂ¥10,000ï¼‰è³¼å…¥æ¸ˆã¿ãƒ•ãƒ©ã‚°|
|`unlock_count`|integer|ãƒ‡ã‚¤ãƒ‘ã‚¹è³¼å…¥å›æ•°ï¼ˆä¾¡æ ¼ç®—å‡ºã«ä½¿ç”¨ï¼‰|
|`last_unlock_date`|string|æœ€çµ‚ãƒ‡ã‚¤ãƒ‘ã‚¹è³¼å…¥æ—¥ï¼ˆYYYY-MM-DDï¼‰|

---

## â˜ï¸ ã‚µãƒ¼ãƒãƒ¼å´Firestoreè¨­è¨ˆ

### Collection: `devices`

| ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆID      | ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰               | å‹       | èª¬æ˜             |
| ------------- | ------------------- | ------- | -------------- |
| `<device_id>` | `license_purchased` | boolean | åˆå›ãƒ©ã‚¤ã‚»ãƒ³ã‚¹è³¼å…¥æ¸ˆã¿ãƒ•ãƒ©ã‚° |
|               | `unlock_count`      | integer | ãƒ‡ã‚¤ãƒ‘ã‚¹è³¼å…¥å›æ•°       |
|               | `last_unlock_date`  | date    | æœ€çµ‚è³¼å…¥æ—¥          |
|               | `purchase_tokens`   | array   | ï¼ˆçœç•¥å¯ï¼‰èª²é‡‘ãƒˆãƒ¼ã‚¯ãƒ³å±¥æ­´  |